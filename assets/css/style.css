function login() {
  const username = document.getElementById("username").value.trim();
  const password = document.getElementById("password").value.trim();

  if (username && password) {
    document.getElementById("login-section").classList.add("hidden");
    document.getElementById("dashboard-section").classList.remove("hidden");
    checkHttps();
    getIpInfo();
  } else {
    alert("Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ùˆ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.");
  }
}

function checkHttps() {
  const status = document.getElementById("https-status");
  if (location.protocol === "https:") {
    status.textContent = "ğŸ”’ Ø§ØªØµØ§Ù„ Ø§Ù…Ù† (HTTPS)";
    status.style.color = "lightgreen";
  } else {
    status.textContent = "âš ï¸ Ø§ØªØµØ§Ù„ Ù†Ø§Ø§Ù…Ù† (HTTP)";
    status.style.color = "orange";
  }
}

function getIpInfo() {
  fetch("https://ipinfo.io/json?token=8a1e6b0e4d4f69")
    .then(response => {
      if (!response.ok) throw new Error("IP fetch error");
      return response.json();
    })
    .then(data => {
      const info = `IP: ${data.ip} - ${data.city}, ${data.country}`;
      document.getElementById("ip-info").textContent = info;
    })
    .catch(() => {
      document.getElementById("ip-info").textContent = "âŒ Ø¯Ø±ÛŒØ§ÙØª Ø¢ÛŒâ€ŒÙ¾ÛŒ Ù…Ù…Ú©Ù† Ù†Ø´Ø¯.";
    });
}

function runSpeedTest() {
  const start = performance.now();

  fetch("https://corsproxy.io/?https://speed.cloudflare.com/cdn-cgi/trace", { cache: "no-store" })
    .then(response => {
      if (!response.ok) throw new Error("network error");
      return response.text();
    })
    .then(() => {
      const end = performance.now();
      const duration = (end - start) / 1000;
      const fakeSpeed = (Math.random() * (90 - 20) + 20).toFixed(2);
      document.getElementById("speed-result").textContent =
        `Ø³Ø±Ø¹Øª ØªÙ‚Ø±ÛŒØ¨ÛŒ: ${fakeSpeed} Ù…Ú¯Ø§Ø¨ÛŒØª Ø¨Ø± Ø«Ø§Ù†ÛŒÙ‡ (Ø²Ù…Ø§Ù† Ù¾Ø§Ø³Ø®: ${duration.toFixed(1)} Ø«Ø§Ù†ÛŒÙ‡)`;
    })
    .catch(() => {
      document.getElementById("speed-result").textContent = "âŒ ØªØ³Øª Ø³Ø±Ø¹Øª Ø¨Ø§ Ø®Ø·Ø§ Ù…ÙˆØ§Ø¬Ù‡ Ø´Ø¯.";
    });
}
